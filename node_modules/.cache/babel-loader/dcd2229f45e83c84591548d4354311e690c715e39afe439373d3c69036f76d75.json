{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Navigate,useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const[isLoading,setIsLoading]=useState(true);const[isAuthenticated,setIsAuthenticated]=useState(false);const location=useLocation();useEffect(()=>{// Simple auth check without backend verification\nconst checkAuth=()=>{const token=localStorage.getItem('token');const user=JSON.parse(localStorage.getItem('user')||'{}');if(token&&user&&user.isAdmin){setIsAuthenticated(true);}else{// Clear any invalid auth data\nlocalStorage.removeItem('token');localStorage.removeItem('user');setIsAuthenticated(false);}setIsLoading(false);};// Short timeout to simulate verification\nsetTimeout(checkAuth,500);},[]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-navy\"})});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin/login\",state:{from:location},replace:true});}return children;};export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useState","Navigate","useLocation","jsx","_jsx","ProtectedRoute","_ref","children","isLoading","setIsLoading","isAuthenticated","setIsAuthenticated","location","checkAuth","token","localStorage","getItem","user","JSON","parse","isAdmin","removeItem","setTimeout","className","to","state","from","replace"],"sources":["X:/gradway/frontend/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\n\nconst ProtectedRoute = ({ children }) => {\n  const [isLoading, setIsLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const location = useLocation();\n\n  useEffect(() => {\n    // Simple auth check without backend verification\n    const checkAuth = () => {\n      const token = localStorage.getItem('token');\n      const user = JSON.parse(localStorage.getItem('user') || '{}');\n      \n      if (token && user && user.isAdmin) {\n        setIsAuthenticated(true);\n      } else {\n        // Clear any invalid auth data\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        setIsAuthenticated(false);\n      }\n      \n      setIsLoading(false);\n    };\n\n    // Short timeout to simulate verification\n    setTimeout(checkAuth, 500);\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-navy\"></div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Navigate to=\"/admin/login\" state={{ from: location }} replace />;\n  }\n\n  return children;\n};\n\nexport default ProtectedRoute; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEzD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAClC,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACU,eAAe,CAAEC,kBAAkB,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAAY,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAc,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAI,IAAI,CAAC,CAE7D,GAAIF,KAAK,EAAIG,IAAI,EAAIA,IAAI,CAACG,OAAO,CAAE,CACjCT,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,IAAM,CACL;AACAI,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC,CAChCN,YAAY,CAACM,UAAU,CAAC,MAAM,CAAC,CAC/BV,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAEAF,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAED;AACAa,UAAU,CAACT,SAAS,CAAE,GAAG,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIL,SAAS,CAAE,CACb,mBACEJ,IAAA,QAAKmB,SAAS,CAAC,+CAA+C,CAAAhB,QAAA,cAC5DH,IAAA,QAAKmB,SAAS,CAAC,4DAA4D,CAAM,CAAC,CAC/E,CAAC,CAEV,CAEA,GAAI,CAACb,eAAe,CAAE,CACpB,mBAAON,IAAA,CAACH,QAAQ,EAACuB,EAAE,CAAC,cAAc,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEd,QAAS,CAAE,CAACe,OAAO,MAAE,CAAC,CAC1E,CAEA,MAAO,CAAApB,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}